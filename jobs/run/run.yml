---
- name: Generate Private SSL Key
  include_tasks:
    file: jobs/run/ssl_generate.yml
    apply:
      tags:
      - sslcertificate
      - run
  tags:
  - sslcertificate
  - run

- name: Configure NGINX
  include_tasks:
    file: jobs/run/config_nginx.yml
    apply:
      tags:
      - nginx
      - run
  tags:
  - nginx
  - run

- name: Run nginx
  include_tasks:
    file: jobs/run/nginx.yml
    apply:
      tags:
        - nginx
        - run
  tags:
    - nginx
    - run

- name: Configure moodle
  include_tasks:
    file: jobs/run/config_moodle.yml
    apply:
      tags:
      - configs-moodle
      - run
  tags:
  - config_moodle
  - run